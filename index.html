<!DOCTYPE html>
<html>
<head>
    <title>OPTrading</title>
</head>

<body>
<h1 align=center>OPTrading : A Framework for Opinion-based Pairs Trading</h1>
<hr>


<h3 align=center>We provide ten stocks (AAPL, GOOG, GE, MMM, JPM, C, BAC, WMT, MCD, ABBV) to be paired.</h3>

<script>

function readTextFile(file, callback) {
    var rawFile = new XMLHttpRequest();
    rawFile.overrideMimeType("application/json");
    rawFile.open("GET", file, true);
    rawFile.onreadystatechange = function() {
        if (rawFile.readyState === 4 && rawFile.status == "200") {
            callback(rawFile.responseText);
        }
    }
    rawFile.send(null);
}



function report(form) {

    document.getElementById("acc").innerHTML = 'Historical Testing Accuracy : '  + '60.78 %';
    document.getElementById("return").innerHTML = 'Historical return on investment : '  + '107.89 %';
    document.getElementById("risk").innerHTML = 'Historical investment risk : '  + '1.48 %';
    document.getElementById("decision").innerHTML = 'Decision : ' + 'Long AAPL Short GOOG' ;

    return;
	document.testform.submit();	// Submit form
}

function validatePrompt(control, promptStr) {
	alert(promptStr);
	control.focus();
	return;
}
</script>

<form name=testform align=center>
<P>Stock 1 <input type="text" name="stock1" value="AAPL">
<P>Stock 2 <input type="text" name="stock2" value="GOOG">

<P><input type="button" value="submit" onClick="report(this.form)">

    <p id="acc">Historical Testing Accuracy : </p>
    <p id="return">Historical return on investment : </p>
    <p id="risk">Historical investment risk : </p>
    <p id="decision">Decision : </p>

    <button align=center class="btn">Make a strategic decision</button>
    <ul class="info"></ul>

</form>



<object align=center  data="report/AAPLGOOGreport.json"></object>



<script>
    var xhr = new XMLHttpRequest();
		xhr.open('get','https://raw.githubusercontent.com/Quant-NLP/OPTrading/main/report/AAPLGOOGreport.json',true);
		xhr.send(null);
		xhr.onload = function(){
			var datastr = JSON.parse(xhr.responseText);
			var info = document.querySelector('.info');
			var len  = datastr.length;
			var str= "";
			var btn = document.querySelector('.btn');
			btn.onclick = function(e){
			var content = '<p>'+'<li> Historical Testing Accuracy : ' +datastr[0].acc + '%' +'</li>'+'</p>'
			+'<p>'+'<li> Historical return on investment : '+datastr[0].return + '%' +'</li>'+'</p>'
			+'<p>'+'<li> Historical investment risk : '+datastr[0].risk + '%'+'</li>' +'</p>'
			+'<p>'+'<li> Decision : '+datastr[0].decision+'</li>'+'</p>';

        console.log(content);
			str+=content;
			info.innerHTML += str;
			return;
			};

		};

</script>




</body>
</html>